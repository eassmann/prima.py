{"name":"Prima.py","tagline":"Colorful band structures with Wien2k","body":"\r\n#                            prima.py 1.0-rc1\r\n\r\n\r\nUSAGE\r\n-----\r\n\r\nThis is a wrapper script for [Maurits Haverkort's `SpaghettiPrimavera.f90`]\r\n(http://www.cpfs.mpg.de/haverkort/spaghetti_primavera).\r\nIt produces the same kind of plots but should provide a simple\r\ninterface.  Like `SpaghettiPrimavera.f90`, it needs a `$case.qtl` and a\r\n`$case.klist_band` file; furthermore it reads `$case.struct` if present.\r\n\r\nIf it exists, `$case.qtl[up|dn]_band` is preferred over\r\n`$case.qtl[up|dn]`.  (Wien2k does not use `.qtl_band` but it may be\r\nconvenient to rename a `.qtl` file intended for band structures.)\r\n\r\nSee `prima.py -h` and `prima.py` (executed in a suitable [Wien2k]\r\n(http://wien2k.at) directory) for usage hints.\r\n\r\n\r\n### An Example\r\n\r\nSuppose we are interested in the t2g and eg contributions of the first\r\ninequivalent atom in the struct.  A typical command line might be\r\n```\r\n   prima.py 1:D-t2g:5,0,0:3 1:D-eg:0,0,5:3 -o prima.ps\r\n```\r\nif  that atom  has  `ISPLIT=2`.   If instead  it  has `ISPLIT=8`,  the\r\ncommand would read:\r\n```\r\n   prima.py 1:DXY+DXZ+DYZ:5,0,0:3 1:DX2Y2+DZ2:0,0,5:3 -o prima.ps`\r\n```\r\nwhich is an abbreviated form of\r\n```\r\n   prima.py 1:DXY:5,0,0:3 1:DXZ:5,0,0:3 1:DYZ:5,0,0:3 \\\r\n            1:DX2Y2:0,0,5:3 1:DZ2:0,0,5:3 -o prima.ps\r\n```\r\nEach of the non-option arguments names an atom, an orbital, a color, a\r\nthickness increment, and a description for the (optional) legend;\r\nthese tokens are separated by colons `:`, and each of them may be\r\nempty.\r\n\r\n\r\n### Specification of Atoms and Orbitals\r\n\r\nThe ampersand `&` combines two orbitals or two sites.  Since it must\r\nbe escaped in most shells, a double plus sign `++` may be used instead\r\n(a single `+` appears in some orbital descriptions in `.qtl` files).\r\n\r\nFor both the atom and the orbital specification, you can use a number\r\n(in the sequence of `$case.struct` or `$case.qtl`) or a name (labels\r\nas given in the same files).  Furthermore, the following special atom\r\nnames are accepted:\r\n\r\n * `all`  → all atoms\r\n * `istl` → the interstitial\r\n * `Z$N`  → all atoms with atomic number `$N`\r\n * `$Sy`  → the atomic symbol expands to all atoms of that element\r\n\r\nThe atomic symbol applies only if you have several inequivalent atoms\r\nof the same element.  As long as you follow the Wien2k convention for\r\nthe struct labels (atomic symbol in the first two places, a number in\r\nthe third), there can be no ambiguity with these special cases.\r\n\r\nAll atom and orbital specifications are case insensitive.\r\n\r\n\r\n### Colors and Normalization\r\n\r\nColors can be named in three ways: as a comma-separated triple `r,g,b`\r\nof red, green, blue values (nominally ∈ [0, 1]), in HTML-type\r\nhexadecimal notation `#RRGGBB`, or one of the [147 color names defined\r\nin SVG](http://www.w3.org/TR/SVG11/types.html#ColorKeywords).\r\n\r\nThe QTL values from Wien2k, when the interstitial is included, are\r\nnormalized to 1, but how much of this weight is contained in a\r\nparticular muffin-tin sphere depends on a number of things.  This\r\nleads to a “normalization problem”; since there is no general\r\nsolution, `prima.py` simply multiplies the colors and thickness\r\nincrements by the QTL values and adds them.  Therefore, it can be\r\nuseful to have r,g,b > 1.  To make this easier, the color may be\r\nprefixed by a factor: `$f × $color`.\r\n\r\nIn general, colored spaghetti are not a quantitative tool, and care\r\nmust be taken in their interpretation, especially concerning the\r\nnormalization and mixing of colors.\r\n\r\n\r\n### Configuration Files\r\n\r\nThe option `-C|--config-file` may be used to read options from a file\r\nin addition to the command line.  Each line in the config file(s)\r\nshould contain one option and, if applicable, its argument, separated\r\nby whitespace.  Any option valid on the command line may be used,\r\nleading dashes may be omitted.  For instance, if, by default, you want\r\nto suppress the minor ticks, add a legend, and output to\r\n`$case_prima.ps`, then put the following into `~/.prima`\r\n```\r\n   minor-ticks\t0\r\n   write-legend\r\n   out-suffix   _prima.ps\r\n```\r\nand add\r\n```\r\n   alias prima.py=\"prima.py -C ~/.prima\"\r\n```\r\nto your `~/.bashrc` or equivalent.  Beside a global config file, it\r\ncan also be useful to have per-directory configuration.  This could be\r\nimplemented by\r\n```\r\n  alias prima.py='prima.py $(test -e .prima && echo \"-C .prima\")'\r\n```\r\nParsing of the config files is primitive.  Lines are skipped if they\r\nare empty or start with a hash `#`.  Leading whitespace and whitespace\r\nbetween option and argument is stripped, but trailing whitespace is\r\npreserved.\r\n\r\n\r\nINSTALLATION\r\n------------\r\n\r\n`prima.py` needs Python 2, NumPy, F2PY (which is now part of NumPy), and\r\na modern Fortran compiler.  I tested it with the following versions:\r\n\r\n * [Python 2](https://python.org/)                2.7.9\r\n * [NumPy](http://numpy.org/)                     1.8.2\r\n * [F2PY](https://sysbio.ioc.ee/projects/f2py2e/) 2\r\n * [gfortran](https://gcc.gnu.org/fortran/)       4.9.2\r\n\r\nRunning `make` in the `prima` directory should produce the file\r\n`sppv.so`.  Python must be able to find this file, and the file\r\n`webcolors.py`.  This is easiest if you create a symlink to prima.py\r\nin some directory in your $PATH, or add the `prima` directory to your\r\n$PATH.\r\n\r\n\r\nCOMMENTS and SUGGESTIONS\r\n------------------------\r\n\r\nabout prima.py should go to <elias.assmann@gmail.com>.\r\n\r\n\r\nACKNOWLEDGEMENTS\r\n----------------\r\n\r\nThanks to Maurits ⟨Maurits@physics.ubc.ca⟩ for letting me build upon\r\nhis code.\r\n\r\nHex colors and color names are handled by the `webcolors` module,\r\nwritten by James Bennett.\r\n\r\nThanks to Peter Blaha and Manuel Zingl for valuable comments on\r\nprevious versions.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}